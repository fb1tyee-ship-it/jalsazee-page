<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Player</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#f7f7f7;display:flex;flex-direction:column;align-items:center}
header{background:#ff0000;color:white;padding:12px;text-align:center;font-size:20px;width:100%;position:sticky;top:0;display:flex;align-items:center;justify-content:center}
header button{position:absolute;left:10px;background:white;color:#ff0000;border:none;padding:6px 12px;font-size:14px;border-radius:6px;cursor:pointer;font-weight:bold}
header button:hover{background:#ffe5e5}
.player-container{display:flex;flex-direction:column;max-width:600px;width:100%;padding:10px}
video{width:100%;border-radius:10px}
#video-title{font-size:14px;margin:5px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
#video-desc{font-size:12px;color:#555;margin:2px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
</style>
</head>
<body>
<header>
  <button onclick="goBack()">⬅ Back</button>
  <span>Shajazada Bhai Videos</span>
</header>
<div class="player-container">
  <video id="main-video" controls></video>
  <h3 id="video-title" title=""></h3>
  <p id="video-desc" title=""></p>
</div>
<script>
const ads = ["https://s.magsrv.com/v1/vast.php?idzone=5707142", "https://s.magsrv.com/v1/vast.php?idzone=5707152", "https://s.magsrv.com/v1/vast.php?idzone=5707156", "https://s.magsrv.com/v1/vast.php?idzone=5707158", "https://s.magsrv.com/v1/vast.php?idzone=5707162", "https://s.magsrv.com/v1/vast.php?idzone=5707164", "https://s.magsrv.com/v1/vast.php?idzone=5707166", "https://s.magsrv.com/v1/vast.php?idzone=5707168", "https://s.magsrv.com/v1/vast.php?idzone=5707170", "https://s.magsrv.com/v1/vast.php?idzone=5707172", "https://s.magsrv.com/v1/vast.php?idzone=5707174", "https://s.magsrv.com/v1/vast.php?idzone=5707176", "https://s.magsrv.com/v1/vast.php?idzone=5707178", "https://s.magsrv.com/v1/vast.php?idzone=5707180", "https://s.magsrv.com/v1/vast.php?idzone=5707182", "https://s.magsrv.com/v1/vast.php?idzone=5707184", "https://s.magsrv.com/v1/vast.php?idzone=5707186", "https://s.magsrv.com/v1/vast.php?idzone=5707188"];
function goBack(){ window.location.href = "index.html"; }
window.onload = function(){
    const params = new URLSearchParams(window.location.search);
    const url = params.get('url');
    const title = params.get('title');
    const desc = params.get('desc');

    if(url){
        const player = document.getElementById('main-video');
        const decodedUrl = decodeURIComponent(url);
        player.src = decodedUrl;

        const titleEl = document.getElementById('video-title');
        const descEl = document.getElementById('video-desc');

        const decodedTitle = decodeURIComponent(title || '');
        const decodedDesc = decodeURIComponent(desc || '');

        titleEl.textContent = decodedTitle;
        descEl.textContent = decodedDesc;

        titleEl.title = decodedTitle;
        descEl.title = decodedDesc;

        player.load(); 
        player.play().catch(e=>console.log('⚠️ Autoplay blocked', e));

        let adPlayed = false;
        player.addEventListener('timeupdate', () => {
            if(!adPlayed && player.currentTime >= 60){
                adPlayed = true;
                const currentTime = player.currentTime;
                player.pause();
                const adUrl = ads[Math.floor(Math.random() * ads.length)];
                const adVideo = document.createElement('video');
                adVideo.src = adUrl;
                adVideo.width = 640;
                adVideo.controls = false;
                document.body.appendChild(adVideo);
                adVideo.play();
                adVideo.addEventListener('ended', () => {
                    adVideo.remove();
                    player.currentTime = currentTime;
                    player.play();
                });
            }
        });
    }
};
</script>
</body>
</html>
