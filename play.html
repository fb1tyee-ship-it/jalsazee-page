<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Player</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#f7f7f7;display:flex;flex-direction:column;align-items:center}
header{background:#ff0000;color:white;padding:12px;text-align:center;font-size:20px;width:100%;position:sticky;top:0}
.player-container{display:flex;flex-direction:column;max-width:600px;width:100%;padding:10px;position:relative}
video{width:100%;border-radius:10px}
#video-title{margin:5px 0;font-weight:bold;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}
#video-desc{margin:0 0 10px 0;color:#555;font-size:13px}
#playlist{display:flex;flex-direction:column;gap:8px;margin-top:10px;max-height:calc(100vh-250px);overflow-y:auto}
.playlist-card{display:flex;background:white;border-radius:8px;overflow:hidden;box-shadow:0 2px 5px rgba(0,0,0,0.1);cursor:pointer}
.playlist-card img{width:100px;height:60px;object-fit:cover}
.playlist-info{padding:5px;display:flex;flex-direction:column;justify-content:center}
.playlist-info h4{margin:0;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}
.playlist-info p{margin:2px 0 0 0;font-size:12px;color:#555}
#ad-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:flex;flex-direction:column;justify-content:center;align-items:center;color:white;font-size:18px;z-index:10;display:none}
#countdown{margin-top:10px;font-size:20px;font-weight:bold}
</style>
</head>
<body>
<header>Shajazada Bhai Videos</header>
<div class="player-container">
<video id="video-player" controls><source src="" type="video/mp4"></video>
<div id="ad-overlay">
<p>Ad is opening in browser...</p>
<p id="countdown">5</p>
</div>
<h3 id="video-title"></h3>
<p id="video-desc"></p>
<div id="playlist"></div>
</div>
<script>
const ads = ["https://www.profitableratecpm.com/mw7ztdgnmi?key=02fe040d5b278090e77e6f3d36b9dcda", "https://www.profitableratecpm.com/mvgr3vcec?key=1ae7e70b622ff6e66c421c3b010fee11", "https://www.profitableratecpm.com/u3bpd959ds?key=17a24dd5727d44c20893ba3e89cff40a", "https://www.profitableratecpm.com/z513xcxn?key=2716991f6639174f0dbf9f9bc382eea0", "https://www.profitableratecpm.com/dz7akcqr8?key=4a57b656f4105bcdd6f76499ce967f2a", "https://www.profitableratecpm.com/kkrnkev1bj?key=aa678f2b1f704590b292aea258a8db75", "https://www.profitableratecpm.com/fmx6g979fh?key=c2c833ab570aa35dce68fd99904f4f3f", "https://www.profitableratecpm.com/nf9jh4dk?key=652241112e3a2bb3113616e06d6e6536", "https://www.profitableratecpm.com/mtg1wzskpv?key=2d102a25de9531a4a26d3a72582b0eeb", "https://www.profitableratecpm.com/rffd4r7giv?key=0124a8cb858c0a4580a84fd6598500d1", "https://www.profitableratecpm.com/mc25ir2059?key=c62be8f56e59dcfbb2cf7f4622d16ff4", "https://www.profitableratecpm.com/kh9qjvbf46?key=1e8d2955dba8bf2f0135666b2dcefa7d", "https://www.profitableratecpm.com/zhhpg2wz?key=cda5e4d770a778a1d7a23650ecb60b93", "https://www.profitableratecpm.com/n28xt53jen?key=c29ab1c126677a64770bd756f4516a8f", "https://www.profitableratecpm.com/xg0ni3ct?key=a9c6fd3135c9885f74c146c8f1ca005e", "https://www.profitableratecpm.com/pznr2znaag?key=0800ade2292afe2ce7793624e6ab47f2"];
const player = document.getElementById('video-player');
const adOverlay = document.getElementById('ad-overlay');
const countdownEl = document.getElementById('countdown');
let adWatched = false;

// Get query params
function getUrlParams(){
    const params = new URLSearchParams(window.location.search);
    return {
        video: params.get('video')||'',
        title: params.get('title')||'',
        desc: params.get('desc')||''
    };
}

// Play video after ad
function playVideoWithAd(videoObj){
    adWatched = false;
    adOverlay.style.display='flex';
    player.style.display='none';
    let timeLeft = 5;
    countdownEl.textContent = timeLeft;

    const adUrl = ads[Math.floor(Math.random()*ads.length)];
    const adWindow = window.open(adUrl,'_blank');

    const interval = setInterval(function(){
        timeLeft -= 1;
        countdownEl.textContent = timeLeft;
        if(timeLeft <= 0){
            clearInterval(interval);
            adWatched = true;
            if(adWindow && !adWindow.closed) adWindow.close();
            adOverlay.style.display='none';
            player.style.display='block';
            loadVideo(videoObj);
        }
    },1000);
}

// Load video
function loadVideo(videoObj){
    if(!adWatched) return;
    player.src = decodeURIComponent(videoObj.video);
    document.getElementById('video-title').textContent = decodeURIComponent(videoObj.title.length>15?videoObj.title.slice(0,15)+'â€¦':videoObj.title);
    document.getElementById('video-desc').textContent = decodeURIComponent(videoObj.desc);
}

// Init
window.onload = function(){
    const params = getUrlParams();
    if(params.video){
        playVideoWithAd(params);
    }
};
</script>
</body>
</html>
